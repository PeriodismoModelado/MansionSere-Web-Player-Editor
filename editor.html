<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Periodismo Modelado Player</title>
    <meta name="description" content="">
     <script src="https://aframe.io/releases/0.2.0/aframe.min.js"></script>
      <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v1.17.0/dist/aframe-extras.min.js"></script>


  </head>
  <body>
    <a-scene>
      <a-entity position="0 0 0">
          <a-collada-model src="model.dae"></a-collada-model>
        </a-entity>
        <a-entity id="player">
          <a-camera id="camera"  keyboard-controls position="0 10 10">
          </a-camera>
        </a-entity>
      </a-scene>
    <script>
    var key = 'PM-Session';
    var request = new XMLHttpRequest();
    var pmSession = localStorage.getItem(key);
    if (!pmSession){
      var request = new XMLHttpRequest();
      request.addEventListener('load', onSessionLoaded);
      request.open('GET', 'PM.session.example.json');
      request.send();
      var onSessionLoaded = function(){
        // Compile the fetched template.
        var treeTemplateStr = request.response;
        console.log(treeTemplateStr);
      }
    }else {
      console.log('new session!');
    }


    var saveSession= function(){
      // Put the object into storage
      localStorage.setItem(key, JSON.stringify(testObject));
    }
    var sceneEl = document.querySelector('a-scene');
    var entity = sceneEl.querySelector('#camera');

    document.addEventListener('keypress', function(evt) {
       switch (evt.which) {
       case 32:
         alert('posicion:'+ entity.getAttribute('position').x);
         break;
       case 13:
         var axis = entity.components['wasd-controls'].data.wsAxis;
         entity.components['wasd-controls'].data.wsAxis = axis === 'z' ? 'y' : 'z'
         break;
       }
    }, true);

    </script>
  </body>

</html>
